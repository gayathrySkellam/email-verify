(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6951],{5216:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pizzawalasdemo/auth/profile",function(){return a(2824)}])},2824:function(e,s,a){"use strict";a.r(s);var i=a(5893),n=a(7294),t=a(5353),l=a(8295),o=a(1102),r=a(2688),u=a(6835),c=a(6775),p=a(9655),d=a(5202),h=a(9008),f=a.n(h);s.default=()=>{let[e,s]=(0,n.useState)("PROFILE"),[a,h]=(0,n.useState)(!1),[x,k]=(0,n.useState)(null),[g,w]=(0,n.useState)(null),[m,y]=(0,n.useState)(!1),[z,P]=(0,n.useState)(null),[j,b]=(0,n.useState)(null),[v,S]=(0,n.useState)(!1),{apiPost:_,apiGet:E}=(0,p.kL)(),{breakDownUrl:O}=(0,p.ZN)(),Z=()=>{s("PROFILE")},I=()=>{Z(),y(!0)},T=(e,s)=>{b({title:e,message:s}),S(!0)},A=async e=>{let s,a="".concat(d.kh.qubriuxAPI,"/store/123/customer/web/profile");try{return s=await E(a,null,e)}catch(e){return console.log(e),s}},L=async e=>{let s=await A(e);console.log("resp: ",s),s&&"success"===s.message?(h(!0),w(s.body)):(console.log("error"),setTimeout(()=>{T("Invalid link","Oops! this link seems to be expired or broken, Please try again with another link.")},300))},N=async()=>{var e;let s=window.location.href,a=await O(s);(null===(e=a.queries)||void 0===e?void 0:e.tx)?(P(a.queries.tx),L(a.queries.tx)):setTimeout(()=>{T("Invalid link","Oops! this link seems to be expired or broken, Please try again with another link.")},1e3)};return(0,n.useEffect)(()=>{N()},[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f(),{children:[(0,i.jsx)("title",{children:"Pizzawala's | Profile"}),(0,i.jsx)("link",{rel:"icon",href:"/pizzawalas/favicon.ico"}),(0,i.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/pizzawalas/apple-touch-icon.png"}),(0,i.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/pizzawalas/favicon-32x32.png"}),(0,i.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/pizzawalas/favicon-16x16.png"}),(0,i.jsx)("link",{rel:"manifest",href:"/pizzawalas/site.webmanifest"})]}),a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.Z,{type:"PIZZAWALA",children:"PROFILE"===e?(0,i.jsx)(o.Z,{navigateToOtp:e=>{k(JSON.parse(e)),s("OTP")},customerDetails:g,token:z,successPopup:I}):(0,i.jsx)(t.Z,{authType:"PROFILE",user:x,handleSuccess:I,token:z})}),(0,i.jsx)(r.Z,{isVisible:m,handleBackdropClick:()=>{y(!1)},title:"Welcome Aboard",message:"Congratulations on signing up for our loyalty program. Stay Tuned! Exciting offers and loyalty rewards are on your way."})]}):(0,i.jsx)(u.Z,{removePreloader:a,loaderType:"PIZZAWALAS"}),(0,i.jsx)(c.Z,{isVisible:v,handleBackdropClick:()=>{},title:null==j?void 0:j.title,message:null==j?void 0:j.message})]})}}},function(e){e.O(0,[3582,6211,4345,7419,9774,2888,179],function(){return e(e.s=5216)}),_N_E=e.O()}]);