(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8418],{9046:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pizzawalas/auth/signup",function(){return s(5914)}])},5914:function(e,a,s){"use strict";s.r(a);var o=s(5893),t=s(7294),l=s(1163),n=s(8295),i=s(5353),r=s(2688),u=s(2543),c=s(9008),d=s.n(c),p=s(5202),g=s(9655);a.default=()=>{let[e,a]=(0,t.useState)("SIGNUP"),[s,c]=(0,t.useState)(null),[f,h]=(0,t.useState)(null),[w,m]=(0,t.useState)(null),[x,v]=(0,t.useState)(!1),[y,z]=(0,t.useState)(null),[S,b]=(0,t.useState)(null),{breakDownUrl:k}=(0,g.ZN)(),[I,P]=(0,t.useState)(null),{apiGet:j}=(0,g.kL)(),[A,N]=(0,t.useState)(null);(0,l.useRouter)();let _=()=>{a("SIGNUP")},Z=async e=>{let a,s="".concat(p.kh.qubriuxAPI,"/store/").concat(e,"/customer/web/signUp/email/store-info");try{return a=await j(s)}catch(e){return console.log(e),a}},C=async e=>{let a,s="".concat(p.kh.qubriuxAPI,"/store/").concat(e,"/customer/web/signUp/listStores");try{a=await j(s);let e=a.body,o=e.map(e=>({label:e.storeName,value:e.storeId}));P(o)}catch(e){return console.log(e),a}},U=async e=>{var a,s;let o=await Z(e);console.log("resp: ",o),o&&(null===(a=o.message)||void 0===a?void 0:a.toLowerCase())==="success"&&o.body?(console.log("resp: ",o),N(o.body),console.log(o.body)):((null==o?void 0:o.message)&&(null===(s=o.message)||void 0===s?void 0:s.toLowerCase())==="failure"&&o.body&&o.body,console.log("error"))},q=async()=>{var e;let a=p.kh.storeMap.PIZZAWALA.amx,s=p.kh.storeMap.PIZZAWALA.ref,o=window.location.href,t=await k(o);t.queries&&t.queries.amx&&(a=t.queries.amx,s="",U(t.queries.amx),C(t.queries.amx)),(null===(e=t.queries)||void 0===e?void 0:e.tag)&&z({tag:t.queries.tag.toUpperCase()}),c(a),h(s)};return(0,t.useEffect)(()=>{q()},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(d(),{children:[(0,o.jsx)("title",{children:"Pizzawala's | Signup"}),(0,o.jsx)("link",{rel:"icon",href:"/pizzawalas/favicon.ico"}),(0,o.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/pizzawalas/apple-touch-icon.png"}),(0,o.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/pizzawalas/favicon-32x32.png"}),(0,o.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/pizzawalas/favicon-16x16.png"}),(0,o.jsx)("link",{rel:"manifest",href:"/pizzawalas/site.webmanifest"})]}),(0,o.jsx)(n.Z,{type:"PIZZAWALA",children:"SIGNUP"===e?(0,o.jsx)(u.Z,{storeId:s,storeData:A,referral:f,navigateToOtp:(e,s)=>{var o,t,l;let n=JSON.parse(e);n.storeId=null!==(t=null==s?void 0:s.storeId)&&void 0!==t?t:null,n.merchantCustomerId=null!==(l=null==s?void 0:null===(o=s.posCustomer)||void 0===o?void 0:o.merchantCustomerId)&&void 0!==l?l:null,m(n),a("OTP")},loginUrl:"/pizzawalas/auth/login",offerTags:y,storeListing:I}):(0,o.jsx)(i.Z,{authType:"SIGNUP",user:w,handleSuccess:e=>{(null==e?void 0:e.redirectURL)&&b(e.redirectURL),_(),v(!0)},storeId:s})}),(0,o.jsx)(r.Z,{isQffer:!1,isVisible:x,handleBackdropClick:()=>{v(!1),S?window.location.href=S:window.location.href="/pizzawalas/auth/login"},title:"Welcome Aboard",message:"Congratulations on signing up for our loyalty program. Stay Tuned! Exciting offers and loyalty rewards are on your way."})]})}}},function(e){e.O(0,[1664,3582,6211,4345,2543,9774,2888,179],function(){return e(e.s=9046)}),_N_E=e.O()}]);