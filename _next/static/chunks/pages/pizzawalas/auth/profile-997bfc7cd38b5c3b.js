(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8211],{6424:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pizzawalas/auth/profile",function(){return a(7176)}])},7176:function(e,s,a){"use strict";a.r(s);var i=a(5893),t=a(7294),l=a(5353),n=a(8295),o=a(1102),r=a(2688),c=a(6835),u=a(6775),p=a(9655),d=a(5202),h=a(9008),f=a.n(h);s.default=()=>{let[e,s]=(0,t.useState)("PROFILE"),[a,h]=(0,t.useState)(!1),[x,g]=(0,t.useState)(null),[w,k]=(0,t.useState)(null),[y,m]=(0,t.useState)(!1),[v,z]=(0,t.useState)(null),[b,P]=(0,t.useState)(null),[j,S]=(0,t.useState)(!1),{apiPost:I,apiGet:O}=(0,p.kL)(),{breakDownUrl:_}=(0,p.ZN)(),[E,Z]=(0,t.useState)(null),q=()=>{s("PROFILE")},A=()=>{q(),m(!0)},N=(e,s)=>{P({title:e,message:s}),S(!0)},T=async(e,s)=>{let a="".concat(d.kh.qfferAPI,"/customer/auth/verify/cx/email/").concat(e),i=JSON.stringify({value:s});try{await I(a,i)}catch(e){console.log("verify",e)}},L=async e=>{let s,a="".concat(d.kh.qubriuxAPI,"/store/123/customer/web/profile");try{return s=await O(a,null,e)}catch(e){return console.log(e),s}},F=async e=>{let s,a="".concat(d.kh.qubriuxAPI,"/store/").concat(e,"/customer/web/signUp/listStores");try{let e=(s=await O(a)).body,i=e.map(e=>({label:e.storeName,value:e.storeId}));Z(i),h(!0)}catch(e){return console.log(e),s}},C=async e=>{let s=await L(e);if(console.log("resp: ",s),s&&"success"===s.message){var a;k(s.body),F(null===(a=s.body)||void 0===a?void 0:a.amx)}else console.log("error"),setTimeout(()=>{N("Invalid link","Oops! this link seems to be expired or broken, Please try again with another link.")},300)},R=async()=>{var e,s,a;let i=window.location.href,t=await _(i);if((null===(e=t.queries)||void 0===e?void 0:e.tx)?(z(t.queries.tx),C(t.queries.tx)):setTimeout(()=>{N("Invalid link","Oops! this link seems to be expired or broken, Please try again with another link.")},1e3),(null===(s=t.queries)||void 0===s?void 0:s.cx)&&(null===(a=t.queries)||void 0===a?void 0:a.k)){let e=await T(t.queries.k,t.queries.cx);e&&console.log("success: ",e)}};return(0,t.useEffect)(()=>{R()},[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f(),{children:[(0,i.jsx)("title",{children:"Pizzawala's | Profile"}),(0,i.jsx)("link",{rel:"icon",href:"/pizzawalas/favicon.ico"}),(0,i.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/pizzawalas/apple-touch-icon.png"}),(0,i.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/pizzawalas/favicon-32x32.png"}),(0,i.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/pizzawalas/favicon-16x16.png"}),(0,i.jsx)("link",{rel:"manifest",href:"/pizzawalas/site.webmanifest"})]}),a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.Z,{type:"PIZZAWALA",children:"PROFILE"===e?(0,i.jsx)(o.Z,{navigateToOtp:e=>{g(JSON.parse(e)),s("OTP")},customerDetails:w,token:v,successPopup:A,storeListing:E}):(0,i.jsx)(l.Z,{authType:"PROFILE",user:x,handleSuccess:A,token:v})}),(0,i.jsx)(r.Z,{isVisible:y,handleBackdropClick:()=>{m(!1),window.location.href="/pizzawalas/auth/login"},title:"Welcome Aboard",message:"Congratulations on signing up for our loyalty program. Stay Tuned! Exciting offers and loyalty rewards are on your way."})]}):(0,i.jsx)(c.Z,{removePreloader:a,loaderType:"PIZZAWALAS"}),(0,i.jsx)(u.Z,{isVisible:j,handleBackdropClick:()=>{},title:null==b?void 0:b.title,message:null==b?void 0:b.message})]})}}},function(e){e.O(0,[3582,6211,4345,7419,9774,2888,179],function(){return e(e.s=6424)}),_N_E=e.O()}]);