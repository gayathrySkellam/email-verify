"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2543],{2543:function(e,l,a){var r=a(5893),i=a(7294),o=a(3582),d=a(6264),s=a(5202),t=a(4047),n=a(9655),u=a(1664),p=a.n(u);let c={name:0,email:1,phone:2,password:3,address:4,city:5,state:6,zipcode:7,dob:8,gender:9,referral:10,checkBox:12,homelocation:11},m=[{label:"Male",value:"Male"},{label:"Female",value:"Female"},{label:"Prefer not to answer/other",value:"Prefer not to answer/other"}],h=[{label:"Single",value:"Single"},{label:"Married",value:"Married"},{label:"Prefer not to answer/other",value:"Prefer not to answer/other"}];l.Z=e=>{var l;let{storeId:a,storeData:u,referral:y,navigateToOtp:v,loginUrl:b,offerTags:f,storeListing:g}=e,[w,T]=(0,i.useState)([{label:"Name",fieldname:"name",placeholder:"John Doe",value:"",id:1,keyboardType:"default",error:null,isRequired:!0,emptyErrorMessage:"Name is required. Please provide your name.",inputWidthSize:"12"},{label:"Email",fieldname:"email",placeholder:"johndoe@company.com",value:"",id:2,keyboardType:"email",error:null,isRequired:!0,emptyErrorMessage:"Email is required. Please provide your email address.",inputWidthSize:"6"},{label:"Phone",fieldname:"phone",placeholder:"999 999 9999",value:"",id:3,keyboardType:"phone",error:null,isRequired:!0,countryCodeValue:"1",inputFieldType:"DEFAULT",emptyErrorMessage:"Phone number is required. Please provide your Phone number.",inputWidthSize:"6"},{label:"Password",fieldname:"password",placeholder:"********",value:"",id:4,keyboardType:"password",error:null,isRequired:!0,isPassword:!0,isPasswordVisible:!1,emptyErrorMessage:"Password is required. Please provide a suitable password.",inputWidthSize:"12"},{label:"Address",fieldname:"address",value:"",id:9,keyboardType:"default",error:null,isRequired:!1,inputFieldType:"MULTI_LINE",inputWidthSize:"12"},{label:"City",fieldname:"city",placeholder:"Beverly Hills",value:"",id:12,keyboardType:"default",error:null,isRequired:!0,inputFieldType:"DEFAULT",emptyErrorMessage:"City name is required. Please select your City.",inputWidthSize:"6"},{label:"State",fieldname:"state",placeholder:"Texas",value:"",id:11,keyboardType:"default",error:null,isRequired:!0,inputFieldType:"SELECT_TYPE",isDropdownOpen:!1,selectBoxType:"state",emptyErrorMessage:"State is required. Please select your State.",inputWidthSize:"6"},{label:"Zip code",fieldname:"zipcode",placeholder:"40170",value:"",id:18,keyboardType:"default",error:null,isRequired:!0,emptyErrorMessage:"Zip code is required. Please provide your zip code"},{label:"Date of birth",fieldname:"dob",placeholder:"dd/mm/yyyy",value:"",id:13,keyboardType:"date",error:null,isRequired:!0,emptyErrorMessage:"Date of birth is required. Please provide your birth date.",inputWidthSize:"6"},{label:"Gender",fieldname:"gender",placeholder:"Select",value:"",id:14,keyboardType:"default",error:null,isRequired:!0,inputFieldType:"SELECT",isDropdownOpen:!1,selectBoxType:"gender",emptyErrorMessage:"Gender is required. Please provide your gender.",inputWidthSize:"6"},{label:"Referral code",fieldname:"referral",placeholder:"AXLTYD",value:"",id:6,keyboardType:"default",error:null,isRequired:!1},{label:"Favourite Home Location",fieldname:"homelocation",placeholder:"Select",value:"",id:19,keyboardType:"default",error:null,isRequired:!1,inputFieldType:"SELECT_TYPE",inputAllowed:!0,isDropdownOpen:!1,selectBoxType:"homelocation",emptyErrorMessage:"Please provide your Favourite Home Location.",inputWidthSize:"12"},{label:(0,r.jsxs)(r.Fragment,{children:["I agree to Pizzawala's ",(0,r.jsx)("a",{href:"https://thepizzawalas.com/privacy-policy-2/",className:"qb-link",target:"_blank",rel:"noopener noreferrer",children:"privacy policy"})," & to receive loyalty rewards, offers and updates via email and text."]}),value:!0,id:17,error:null,isRequired:!0,emptyErrorMessage:"Please agree to receive loyalty reward communications if you wish to signup to our loyalty program.",inputWidthSize:"12",inputFieldType:"CHECKBOX"}]),[x,C]=(0,i.useState)({country:s.Ju,state:[],city:[],gender:m,marital:h,homelocation:[]}),[q,E]=(0,i.useState)(null!==(l=null==u?void 0:u.storeId)&&void 0!==l?l:null),[S,P]=(0,i.useState)(null),[k,j]=(0,i.useState)(null),[L,z]=(0,i.useState)(null),[D,R]=(0,i.useState)([]),[F,N]=(0,i.useState)([]),[M,O]=(0,i.useState)(null),[W,I]=(0,i.useState)(!1),{apiPost:V}=(0,n.kL)(),{nameValidation:_,emailValidation:B,phoneValidation:A,passwordValidation:H,returnErrorTexts:U}=(0,n.V$)(),J=e=>{let l=[...w];l[e].isDropdownOpen=!w[e].isDropdownOpen,T(l)},Y=e=>{let l=t.FH[e.value];console.log("options: ",l),R([...l]),P(e)},K=e=>{N([...t._I[e.value]]),j(e)},X=e=>{z(e)},Z=e=>{},G=(e,l,a,r)=>{let i=[...w];i[l].isDropdownOpen=!1,i[l].value=e.label,i[l].error=null,"country"===r?Y(e):"state"===r?K(e):"city"===r?X(e):"marital"===r?Z(e):"homelocation"===r&&E(e.value),T(i)},$=(e,l,a,r)=>{let i={...x};i[r]=l,C(i);let o=[...w];o[e].isDropdownOpen=a,console.log("options: ",i,a,e,o[e]),T(o)},Q=(e,l)=>{let a=[];(null==e?void 0:e.length)&&e.length>1?(console.log("Val: ",e),D.forEach(l=>{l.label.toLowerCase().includes(e.toLowerCase())&&a.push(l)}),(null==a?void 0:a.length)&&$(l,a,!0,"state")):e&&e.length||$(l,a,!1,"state")},ee=(e,l)=>{let a=[];(null==e?void 0:e.length)&&e.length>1?(console.log("Val: ",e),F.forEach(l=>{l.label.toLowerCase().includes(e.toLowerCase())&&a.push(l)}),(null==a?void 0:a.length)&&$(l,a,!0,"city")):e&&e.length||$(l,a,!1,"city")},el=(e,l)=>{let a=[];(null==e?void 0:e.length)&&e.length>1?(console.log("Val: ",e,l),g.forEach(l=>{l.label.toLowerCase().includes(e.toLowerCase())&&a.push(l)}),(null==a?void 0:a.length)&&$(l,a,!0,"homelocation")):e&&e.length||$(l,a,!1,"homelocation")},ea=(e,l,a)=>{"state"===a?Q(e,l):"city"===a?ee(e,l):"homelocation"===a&&el(e,l)},er=(e,l,a,r)=>{let i=[...w];i[l].value=e,i[l].error=null,r&&ea(e,l,r),T(i)},ei=(e,l)=>{let a=[...w];a[l].countryCode="+".concat(e.code),a[l].countryCodeValue=e.code,T(a)},eo=e=>{let l=[...w],a=w[e].isPasswordVisible;l[e].keyboardType=a?"password":"default",l[e].isPasswordVisible=!a,T(l)};async function ed(e){return/^\d{5}(-\d{4})?$/.test(e)}let es=async()=>{let e=await _(w[c.name].value),l=await B(w[c.email].value),r=await A(w[c.phone].value),i=await H(w[c.password].value),o=await ed(w[c.zipcode].value);if(e&&l&&i&&r&&o){var d,t,n;let e;I(!0);let l="".concat(s.kh.qubriuxAPI,"/store/").concat(a,"/customer/web/sendOtp"),r=JSON.stringify({name:w[c.name].value,email:w[c.email].value.toLowerCase(),phone_number:"".concat(w[c.phone].countryCodeValue).concat(w[c.phone].value),password:w[c.password].value,deviceId:null,referralCode:w[c.referral].value?null===(d=w[c.referral].value)||void 0===d?void 0:d.toUpperCase():null,birthday:w[c.dob].value?w[c.dob].value:null,address:w[c.address].value,gender:w[c.gender].value,state:w[c.state].value,city:w[c.city].value,zipCode:w[c.zipcode].value,acceptChannelCommunications:w[c.checkBox].value,tag:f&&f.tag?f.tag:null,referrerStoreId:q});console.log(l,r);try{e=await V(l,r)}catch(e){O("Something went wrong! Please try again after some time."),I(!1)}(null===(t=e)||void 0===t?void 0:t.message.toLowerCase())==="success"?(console.log("response: ",e),v(r,e.body)):(null===(n=e)||void 0===n?void 0:n.message.toLowerCase())==="failure"&&e.body?O(e.body):O("Something went wrong! Please try again after some time."),I(!1)}else{let a=[...w];e||(a[c.name].error=await U(w[c.name].value,"name")),l||(a[c.email].error=await U(w[c.email].value,"email")),r||(a[c.phone].error=await U(w[c.phone].value,"phone")),i||(a[c.password].error=await U(w[c.password].value,"password")),o||(a[c.zipcode].error="Invalid zip code. Please enter a valid zip code"),T(a)}},et=()=>{let e=!0;return w.forEach(l=>{l.isRequired&&!l.value&&(e=!1)}),!e},en=(0,i.useMemo)(()=>et(),[w]),eu=()=>{let e=[...w];e[c.referral].value=y,T([...e])};return(0,i.useEffect)(()=>{if(u){let e=[...w];u.storeName&&(e[c.homelocation].value=u.storeName),T(e)}},[u]),(0,i.useEffect)(()=>{y&&eu(),Y({label:"United States",value:"USA",code:"1"})},[y]),(0,r.jsxs)("form",{className:"qb-signup-form px-md-5 py-5 d-flex flex-column align-items-stretch",id:"qb-signupform",children:[(0,r.jsx)("h3",{className:"qb-title mb-0 pb-4 qb-signup-title-text",children:"Create account"}),(0,r.jsx)("div",{className:"container-fluid px-0 pt-md-0",children:(0,r.jsxs)("div",{className:"row gy-3",children:[w.map((e,l)=>e.isInputHidden?null:(0,r.jsx)("div",{className:"col-12 col-lg-".concat(e.inputWidthSize),children:e.inputFieldType&&"SELECT_TYPE"===e.inputFieldType?(0,r.jsx)(o.jL,{value:e.value,id:e.id,index:l,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,fieldType:e.keyboardType,inputAllowed:!0,options:x[e.selectBoxType],isDropdownOpen:e.isDropdownOpen,onClick:J,onChange:er,onSelect:G}):e.inputFieldType&&"SELECT"===e.inputFieldType?(0,r.jsx)(o.jL,{value:e.value,id:e.id,index:l,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,fieldType:e.keyboardType,options:x[e.selectBoxType],isDropdownOpen:e.isDropdownOpen,onClick:J,onChange:er,onSelect:G}):e.inputFieldType&&"PHONE"===e.inputFieldType?(0,r.jsx)(o.sb,{value:e.value,id:e.id,index:l,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,countryCode:e.countryCode,codePlaceholder:e.countryCodePlaceholder,isDisabled:e.isDisabled,onCountryCodeSelect:ei,onChange:er}):e.inputFieldType&&"MULTI_LINE"===e.inputFieldType?(0,r.jsx)(o.zC,{value:e.value,id:e.id,index:l,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,isDisabled:e.isDisabled,onChange:er}):e.inputFieldType&&"CHECKBOX"===e.inputFieldType?(0,r.jsx)(o.Jg,{value:e.value,id:e.id,index:l,label:e.label,error:e.error,isDisabled:e.isDisabled,onChange:er}):(0,r.jsx)(o.Wz,{value:e.value,id:e.id,index:l,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,fieldType:e.keyboardType,isPassword:e.isPassword,showPassword:e.isPasswordVisible,isDisabled:e.isDisabled,onViewPassword:eo,onChange:er})},"input-".concat(l))),(null==M?void 0:M.length)?(0,r.jsx)("div",{className:"col-12",children:(0,r.jsx)("p",{className:"qb-input-error-message mt-1 qb-general-error qb-error-active",children:M})}):null,(0,r.jsx)("div",{className:"col-lg-12",children:(0,r.jsx)("div",{className:"w-100 pt-md-3 pt-3 d-flex flex-column flex-md-row align-items-stretch align-items-md-center justify-content-end",children:(0,r.jsx)(d.K,{id:"qb-profile-btn",isDisabled:en,isLoading:W,onDisabledClick:()=>{let e=[...w];w.forEach((l,a)=>{l.isRequired&&!l.value&&(e[a].error=l.emptyErrorMessage?l.emptyErrorMessage:"Required field. Please fill this field to continue.")}),T([...e])},onClick:es,children:(0,r.jsxs)(r.Fragment,{children:["Signup",(0,r.jsx)("span",{className:"qb-btn-loader ms-2"})]})})})}),(0,r.jsx)("div",{className:"col-12",children:(0,r.jsx)("div",{className:"w-100 flex-column align-items-center align-items-md-end d-flex",children:b?(0,r.jsxs)("p",{className:"qb-description",children:["Already have an account? ",(0,r.jsx)(p(),{href:b,className:"qb-link",children:"Login"})]}):null})})]})})]})}}}]);